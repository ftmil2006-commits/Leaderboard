<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Leaderboard</title>

<style>
/* ===== GLOBAL ===== */
body {
  font-family: "Segoe UI", sans-serif;
  background: linear-gradient(120deg, #0f2027, #203a43, #2c5364);
  color: white;
  text-align: center;
  padding: 30px;
  margin: 0;
}

/* ===== HEADER ===== */
.header {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 15px;
  margin-bottom: 30px;
}

.club-logo {
  width: 90px;
}

.club-text h1 {
  margin: 0;
  font-size: 26px;
  letter-spacing: 1px;
}

.club-text h3 {
  margin: 0;
  font-size: 15px;
  font-weight: normal;
  opacity: 0.9;
}

/* ===== SEARCH ===== */
#search {
  padding: 12px;
  width: 90%;
  max-width: 420px;
  border-radius: 10px;
  border: none;
  font-size: 16px;
  margin-bottom: 20px;
}

/* ===== CARD ===== */
.card {
  background: rgba(255,255,255,0.1);
  backdrop-filter: blur(10px);
  padding: 20px;
  border-radius: 16px;
  max-width: 800px;
  margin: auto;
  box-shadow: 0 10px 25px rgba(0,0,0,0.4);
}

/* ===== TABLE ===== */
table {
  width: 100%;
  border-collapse: collapse;
}

th, td {
  padding: 12px;
  border-bottom: 1px solid rgba(255,255,255,0.2);
}

th {
  cursor: pointer;
}

tr:hover {
  background: rgba(255,255,255,0.12);
}

/* ===== TOP 3 ===== */
.gold { background: rgba(255,215,0,0.25); }
.silver { background: rgba(192,192,192,0.25); }
.bronze { background: rgba(205,127,50,0.25); }

/* ===== ANIMATION ===== */
.fade-in {
  animation: fade 0.6s ease forwards;
}

@keyframes fade {
  from { opacity: 0; transform: translateY(15px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ===== MOBILE ===== */
@media (max-width: 600px) {
  .header {
    flex-direction: column;
  }
}
</style>
</head>

<body>

<!-- HEADER -->
<div class="header">
  <img src="club-logo.jpg" class="club-logo" alt="Club Logo">
  <div class="club-text">
    <h1>Compex Coders Club</h1>
    <h3>Computer Science Department</h3>
  </div>
</div>

<h2>üèÜ Leaderboard</h2>

<input id="search" placeholder="üîç Search group name..." onkeyup="render()">

<div class="card">
  <table>
    <thead>
      <tr>
        <th onclick="setSort('rank')">Rank ‚¨ç</th>
        <th onclick="setSort('name')">Group ‚¨ç</th>
        <th>Achievement</th>
      </tr>
    </thead>
    <tbody id="board"></tbody>
  </table>
</div>

<script>
let data = JSON.parse(localStorage.getItem("event_data") || "[]");
let sortMode = "rank";

function setSort(mode) {
  sortMode = mode;
  render();
}

function render() {
  const q = document.getElementById("search").value.toLowerCase();
  const board = document.getElementById("board");
  board.innerHTML = "";

  let list = [...data];

  // sort
  if (sortMode === "rank") {
    list.sort((a,b) => a.rank - b.rank);
  } else {
    list.sort((a,b) =>
      (a.group_name || a.team_name)
        .localeCompare(b.group_name || b.team_name)
    );
  }

  // filter + render
  list
    .filter(r =>
      (r.group_name || r.team_name).toLowerCase().includes(q)
    )
    .slice(0, 20)
    .forEach(r => {
      const tr = document.createElement("tr");
      tr.classList.add("fade-in");

      if (r.rank === 1) tr.classList.add("gold");
      if (r.rank === 2) tr.classList.add("silver");
      if (r.rank === 3) tr.classList.add("bronze");

      tr.innerHTML = `
        <td>${r.rank}</td>
        <td>${r.group_name || r.team_name}</td>
        <td>${r.badge}</td>
      `;
      board.appendChild(tr);
    });
}

render();
</script>

</body>
</html>
